{"ast":null,"code":"import Utility from \"../Utility\";\nimport App from \"../App\";\n\nclass ControllerRicerca {\n  constructor() {\n    const _today = new Date();\n\n    const _h = _today.getHours();\n\n    this._partenza = \"Milano Centrale\";\n    this._arrivo = \"Roma Termini\";\n    this._orario = _h;\n    this._convoglio = \"Frecciarossa 1000\";\n    this._faster = {\n      treni: [],\n      durata: 0\n    };\n  }\n\n  handleSelectPartenzaChange(value) {\n    this._partenza = value;\n    App.singleton.setState({\n      treni: Utility.ricercaTreni(value, this._arrivo, this._orario, this._convoglio)\n    });\n  }\n\n  handleSelectArrivoChange(value) {\n    this._arrivo = value;\n    App.singleton.setState({\n      treni: Utility.ricercaTreni(this._partenza, value, this._orario, this._convoglio)\n    });\n  }\n\n  handleSelectOraInizioChange(value) {\n    this._oraInizio = value;\n    App.singleton.setState({\n      treni: Utility.ricercaTreni(this._partenza, this._arrivo, value, this._convoglio)\n    });\n  }\n\n  handleSelectConvoglioChange(value) {\n    this._convoglio = value;\n    App.singleton.setState({\n      treni: Utility.ricercaTreni(this._partenza, this._arrivo, this._orario, value)\n    });\n  }\n\n  getDatiRigaTreno(treno) {\n    const _posPartenza = Utility.getPosFermata(treno, this._partenza);\n\n    const _posArrivo = Utility.getPosFermata(treno, this._arrivo);\n\n    let result = {\n      \"stazione_partenza\": treno.fermate[0].stazione,\n      \"stazione_arrivo\": treno.fermate[treno.fermate.length - 1].stazione,\n      \"orario_partenza\": treno.fermate[0].orario,\n      \"orario_arrivo\": treno.fermate[treno.fermate.length - 1].orario\n    };\n\n    if (_posPartenza && _posPartenza >= 0) {\n      result.stazione_partenza = treno.fermate[_posPartenza].stazione;\n      result.orario_partenza = treno.fermate[_posPartenza].orario;\n    }\n\n    if (_posArrivo && _posArrivo >= 0) {\n      result.stazione_arrivo = treno.fermate[_posArrivo].stazione;\n      result.orario_arrivo = treno.fermate[_posArrivo].orario;\n    }\n\n    let durataObj = Utility.getHourDiff(result.orario_partenza, result.orario_arrivo);\n\n    if (this._faster.durata == 0 && this._faster.treno == \"\") {\n      console.log('Caso 1');\n\n      this._faster.treni.push(treno.treno);\n\n      this._faster.durata = durataObj.minuti_totali;\n    } else if (this._faster.durata > durataObj.minuti_totali) {\n      console.log('Caso 2');\n      this._faster.treni = [treno.treno];\n      this._faster.durata = durataObj.minuti_totali;\n    } else if (this._faster.durata === durataObj.minuti_totali) {\n      console.log('Caso 3');\n\n      this._faster.treni.push(treno.treno);\n    }\n\n    result.durata = Utility.displayDurata(durataObj);\n    return result;\n  }\n\n  getFermateTreno(treno) {\n    const _posPartenza = Utility.getPosFermata(treno, this._partenza);\n\n    const _posArrivo = Utility.getPosFermata(treno, this._arrivo);\n\n    let fermate = [];\n\n    for (let i = _posPartenza; i <= _posArrivo; i++) {\n      fermate.push(treno.fermate[i].stazione);\n    }\n\n    return fermate;\n  }\n\n}\n\nexport default ControllerRicerca;","map":{"version":3,"sources":["/Users/antoninolatocca/Developer/React/react-ricerca-treni/src/controllo/ControllerRicerca.js"],"names":["Utility","App","ControllerRicerca","constructor","_today","Date","_h","getHours","_partenza","_arrivo","_orario","_convoglio","_faster","treni","durata","handleSelectPartenzaChange","value","singleton","setState","ricercaTreni","handleSelectArrivoChange","handleSelectOraInizioChange","_oraInizio","handleSelectConvoglioChange","getDatiRigaTreno","treno","_posPartenza","getPosFermata","_posArrivo","result","fermate","stazione","length","orario","stazione_partenza","orario_partenza","stazione_arrivo","orario_arrivo","durataObj","getHourDiff","console","log","push","minuti_totali","displayDurata","getFermateTreno","i"],"mappings":"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","sourcesContent":["import Utility from \"../Utility\";\nimport App from \"../App\";\n\nclass ControllerRicerca {\n\n    constructor() {\n        const _today = new Date();\n        const _h = _today.getHours();\n\n        this._partenza = \"Milano Centrale\";\n        this._arrivo = \"Roma Termini\";\n        this._orario = _h;\n        this._convoglio = \"Frecciarossa 1000\";\n\n        this._faster = {\n            treni: [],\n            durata: 0\n        };\n    }\n\n    handleSelectPartenzaChange(value) {\n        this._partenza = value;\n        App.singleton.setState({treni:Utility.ricercaTreni(value, this._arrivo, this._orario, this._convoglio)});\n    }\n\n    handleSelectArrivoChange(value) {\n        this._arrivo = value;\n        App.singleton.setState({treni:Utility.ricercaTreni(this._partenza, value, this._orario, this._convoglio)})\n    }\n\n    handleSelectOraInizioChange(value) {\n        this._oraInizio = value;\n        App.singleton.setState({treni:Utility.ricercaTreni(this._partenza, this._arrivo, value, this._convoglio)});\n    }\n\n    handleSelectConvoglioChange(value) {\n        this._convoglio = value;\n        App.singleton.setState({treni:Utility.ricercaTreni(this._partenza, this._arrivo, this._orario, value)})\n    }\n\n    getDatiRigaTreno(treno) {\n        const _posPartenza = Utility.getPosFermata(treno, this._partenza);\n        const _posArrivo = Utility.getPosFermata(treno, this._arrivo);\n\n        let result = {\n            \"stazione_partenza\": treno.fermate[0].stazione,\n            \"stazione_arrivo\": treno.fermate[treno.fermate.length -1].stazione,\n            \"orario_partenza\": treno.fermate[0].orario,\n            \"orario_arrivo\": treno.fermate[treno.fermate.length -1].orario\n        };\n    \n        if(_posPartenza && _posPartenza >= 0) {\n          result.stazione_partenza = treno.fermate[_posPartenza].stazione;\n          result.orario_partenza = treno.fermate[_posPartenza].orario;\n        }\n        if(_posArrivo && _posArrivo >= 0) {\n          result.stazione_arrivo = treno.fermate[_posArrivo].stazione;\n          result.orario_arrivo = treno.fermate[_posArrivo].orario;\n        }\n\n        let durataObj = Utility.getHourDiff(result.orario_partenza, result.orario_arrivo);\n        if(this._faster.durata == 0 && this._faster.treno == \"\") {\n            console.log('Caso 1');\n            this._faster.treni.push(treno.treno);\n            this._faster.durata = durataObj.minuti_totali;\n        } else if(this._faster.durata > durataObj.minuti_totali) {\n            console.log('Caso 2');\n            this._faster.treni = [treno.treno];\n            this._faster.durata = durataObj.minuti_totali;\n        } else if(this._faster.durata === durataObj.minuti_totali) {\n            console.log('Caso 3');\n            this._faster.treni.push(treno.treno);\n        }\n        result.durata = Utility.displayDurata(durataObj);\n\n        return result;\n    }\n\n    getFermateTreno(treno) {\n        const _posPartenza = Utility.getPosFermata(treno, this._partenza);\n        const _posArrivo = Utility.getPosFermata(treno, this._arrivo);\n\n        let fermate = [];\n        for(let i = _posPartenza; i <= _posArrivo; i++) {\n            fermate.push(treno.fermate[i].stazione);\n        }\n        return fermate;\n    }\n\n}\n\nexport default ControllerRicerca;"]},"metadata":{},"sourceType":"module"}